# ============================================
# Papr Memory - Open Source Configuration
# ============================================
# Copy this file to .env and fill in your values
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults

# ============================================
# Edition Configuration
# ============================================
# Set to "opensource" for self-hosted deployment
# Set to "cloud" if you're running the cloud edition
PAPR_EDITION=opensource

# ============================================
# API Key (For Testing)
# ============================================
# Generate your API key after starting services:
#   python scripts/generate_api_key.py --email your@email.com --name "My Project"
#
# For quick testing, you can use this default key (change in production!)
PAPR_API_KEY=pmem_oss_default_testing_key_CHANGE_ME

# ============================================
# Server Configuration
# ============================================
PORT=5001
DEBUG=true
ENVIRONMENT=development
PYTHONPATH=/app
USE_DOTENV=true

# Secret key for session encryption (generate a secure random string)
# You can generate one with: python -c "import secrets; print(secrets.token_urlsafe(32))"
APP_SECRET_KEY=your-secret-key-change-me

# ============================================
# AI/LLM Configuration [REQUIRED]
# ============================================
# OpenAI API key for embeddings and LLM operations
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_ORGANIZATION=org-your-org-id

# LLM Model Configuration
LLM_MODEL=gpt-4o-mini
LLM_MODEL_MINI=gpt-4o-mini
LLM_MODEL_NANO=gpt-4o-mini

# ============================================
# MongoDB Configuration [REQUIRED]
# ============================================
# For Docker: mongodb://admin:password@mongodb:27017/papr_memory?authSource=admin
# For local: mongodb://localhost:27017/papr_memory
MONGO_URI=mongodb://admin:password@mongodb:27017/papr_memory?authSource=admin

# MongoDB credentials (used by docker-compose)
MONGODB_USERNAME=admin
MONGODB_PASSWORD=password
MONGODB_DATABASE=papr_memory

# ============================================
# Redis Configuration [REQUIRED]
# ============================================
# For Docker: redis://:password@redis:6379/0
# For local: redis://localhost:6379/0
REDIS_URL=redis://:password@redis:6379/0
REDIS_PASSWORD=password

# ============================================
# Neo4j Configuration [REQUIRED]
# ============================================
# For Docker: bolt://neo4j:7687
# For local: bolt://localhost:7687
NEO4J_URL=bolt://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password
NEO4J_SECRET=password

# ============================================
# Qdrant Vector Database [REQUIRED]
# ============================================
# For Docker: http://qdrant:6333
# For local: http://localhost:6333
QDRANT_URL=http://qdrant:6333
# Leave empty for self-hosted Qdrant without auth
QDRANT_API_KEY=

# Qdrant collection names
QDRANT_COLLECTION_QWEN0pt6B4B=Qwen0pt6B
QDRANT_COLLECTION_QWEN4B=Qwen4B

# ============================================
# Parse Server Configuration [REQUIRED]
# ============================================
# Parse Server is used for user management and ACL
# For Docker: http://parse-server:1337/parse
# For local: http://localhost:1337/parse
PARSE_SERVER_URL=http://parse-server:1337/parse

# Parse credentials (generate random UUIDs for security in production)
PARSE_APPLICATION_ID=papr-oss-app-id
PARSE_REST_API_KEY=papr-oss-rest-key
PARSE_MASTER_KEY=papr-oss-master-key

# Docker compose uses these variable names
PARSE_SERVER_APPLICATION_ID=papr-oss-app-id
PARSE_SERVER_MASTER_KEY=papr-oss-master-key

# Parse Dashboard credentials (optional, for development only)
PARSE_DASHBOARD_USER=admin
PARSE_DASHBOARD_PASSWORD=password
PARSE_DASHBOARD_SESSION_SECRET=your-dashboard-secret

# ============================================
# Public URLs (for OAuth callbacks, etc.)
# ============================================
# Your public-facing server URL
PUBLIC_SERVER_URL=http://localhost:5001
PYTHON_SERVER_URL=http://localhost:5001
WEB_APP_URL=http://localhost:3000

# ============================================
# Telemetry Configuration (Optional)
# ============================================
# We collect anonymous usage data to improve Papr Memory
# See docs/TELEMETRY.md for what we collect
# Set to "false" to opt out completely
TELEMETRY_ENABLED=true

# PostHog is used for self-hostable analytics
# You can self-host PostHog or use the cloud version
# Leave empty to disable
POSTHOG_API_KEY=
POSTHOG_HOST=https://app.posthog.com

# Amplitude - MUST be empty for open source (cloud-only)
# Note: Some legacy code still references AMPLITUDE_API_KEY
# Leaving it empty prevents Amplitude from initializing
AMPLITUDE_API_KEY=

# ============================================
# Embedding Configuration (Optional)
# ============================================
# Hugging Face for alternative embeddings
HUGGING_FACE_ACCESS_TOKEN=

# DeepInfra for additional embedding models
DEEPINFRA_TOKEN=
DEEPINFRA_API_URL=https://api.deepinfra.com/v1/openai/embeddings

# ============================================
# Content Limits
# ============================================
# Maximum content length in bytes (default: 600KB)
MAX_CONTENT_LENGTH=600000
MAX_BATCH_SIZE=50
MAX_FILE_SIZE_BYTES=52428800

# Token limits
MAX_TOKENS_PER_ITEM=4000
MAX_TOTAL_BATCH_TOKENS=100000

# ============================================
# Logging Configuration
# ============================================
LOGGING_ENV=development
LoggingtoFile=false

# ============================================
# Docker Image Configuration
# ============================================
# Used by docker-compose for building
IMAGE_NAME=papr_memory_oss
IMAGE_TAG=latest

# ============================================
# SSL Configuration (Optional)
# ============================================
# Path to CA certificates bundle
# Linux: /etc/ssl/certs/ca-certificates.crt
# macOS: /opt/homebrew/etc/openssl@3/cert.pem
# SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
# REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt

# ============================================
# Feature Flags (Open Source defaults)
# ============================================
# These are already configured in config/opensource.yaml
# Override here if needed

# Enable schema selection via LLM
ENABLE_LLM_SCHEMA_SELECTION=true
OPENAI_SCHEMA_SELECTOR_MODEL=gpt-4o-mini

# Enable hierarchical document chunking
FEATURE_HIERARCHICAL_CHUNKING=true

# ============================================
# CLOUD-ONLY FEATURES (Not needed for OSS)
# ============================================
# The following are only used in cloud edition:
# - AUTH0_* (OAuth authentication)
# - STRIPE_* (Payment processing)
# - AMPLITUDE_* (Cloud analytics)
# - TEMPORAL_* (Durable workflows)
# - AZURE_* (Azure services)
# - NEO4J_GRAPHQL_ENDPOINT (Neo4j Aura GraphQL)
